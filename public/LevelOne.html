<!DOCTYPE html>
<html>
<head>
    <title>Simple Game</title>
</head>
<body id="myBody" style="background-repeat:repeat; background-size:80%" background="myBackground01.jpg" onkeydown="handleKey(event)">
    <div id="myDiv01"></div>

    <script>
        // Initialize positions for myImg01
        const img1 = document.getElementById("myImg01");
        const img2 = document.getElementById("myImg02");
        img1.style.left = "50px";
        img1.style.top = "0px";

        // Handle keypresses directly within onkeydown event handler
        function handleKey(event) {
            let myKey = event.key;
            document.getElementById("myDiv01").innerHTML = myKey; // Display pressed key

            // Movement for "d" (right)
            if (myKey === "d") {
                img1.style.left = parseInt(img1.style.left) + 7 + "px";
                myCheckHit();
            }

            // Movement for "a" (left)
            if (myKey === "a") {
                img1.style.left = parseInt(img1.style.left) - 7 + "px";
                myCheckHit();
            }

            // Movement for "s" (down)
            if (myKey === "s") {
                img1.style.top = parseInt(img1.style.top) + 7 + "px";
                myCheckHit();
            }

            // Movement for "w" (up)
            if (myKey === "w") {
                img1.style.top = parseInt(img1.style.top) - 7 + "px";
                myCheckHit();
            }
        }

        // Collision detection logic (Unchanged)
        function myHitOther(my1, my2) {
            let left1 = parseInt(document.getElementById(my1).style.left);
            let right1 = left1 + parseInt(document.getElementById(my1).style.width);
            let top1 = parseInt(document.getElementById(my1).style.top);
            let bottom1 = top1 + parseInt(document.getElementById(my1).style.height);

            let left2 = parseInt(document.getElementById(my2).style.left);
            let right2 = left2 + parseInt(document.getElementById(my2).style.width);
            let top2 = parseInt(document.getElementById(my2).style.top);
            let bottom2 = top2 + parseInt(document.getElementById(my2).style.height);

            // Check if the elements overlap
            if ((right1 >= left2) &&
                (bottom1 >= top2) &&
                (left1 <= right2) &&
                (top1 <= bottom2)) {
                return true;
            }
            return false;
        }

        // Check for collisions after every move
        function myCheckHit() {
            if (myHitOther('myImg01', 'myImg02')) {
                alert('You lose!');
                img1.style.left = '50px'; // Reset position
                img1.style.top = '0px'; // Reset position
            }
        }
    </script>

    <!-- Images -->
    <img id="myImg01" style="position:absolute; width:100px; height:80px;" src="myImage01.jpg">
    <img id="myImg02" style="position:absolute; width:100px; height:80px; top:0px; left:250px;" src="myImage02.jpg">
</body>
</html>
