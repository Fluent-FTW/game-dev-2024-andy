
<!doctype html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1HDX578HYV"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-1HDX578HYV');
    </script>
	<meta charset="utf-8">
    <title>TimeGuessr - Round Two</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="stylesheet" href="css/stylesheet1.css">
    <link rel="stylesheet" href="css/game5.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500&display=swap" rel="stylesheet">
    <script
        src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.core.js"
        crossorigin async
        data-callback="initMapKit"
        data-libraries="map,annotations"
        data-token="eyJraWQiOiJYNzNDNThBOFpTIiwidHlwIjoiSldUIiwiYWxnIjoiRVMyNTYifQ.eyJpc3MiOiI2UEtTQ1Y5NzIyIiwiaWF0IjoxNzIyNzQxMTA2LCJvcmlnaW4iOiJ0aW1lZ3Vlc3NyLmNvbSJ9.ctvYo-hGl3gJZTHexMoC0-iFOU-9tvn08ThKvsBovUsFJ4bGq1kaaiyizABL9qwCdlSDioqAUxhWrz-7sKW4_Q"
    ></script>
    <script data-cfasync="false">
        window.ramp = window.ramp || {};
        window.ramp.que = window.ramp.que || [];

        let rampPassUp = 'rj'

        if (rampPassUp === 'rj') {
            console.log('Skip ramp pass up')
        } else {
            window.ramp.up = {
                format: 'EUP1',
                eid: rampPassUp
            }
        }
        
    </script>
</head>
<body class="game">
    
    <div class="navbar">
        <a href="/">
            <img src="assets/branding/logo.svg">
        </a>

        <a href="/subscriptions">
            <p id="removeAdverts">Remove ads</p>
        </a>
    </div>

    <div class="main-content">
        <div class="photoContainer" id="photoContainer">
            <img class='zoom' id="variableImage"/>
            <img class='mapIcon' id="mapIcon" src="assets/mapIcon.webp">
            <img id="miniImage">
        </div>
        <div id="progressBar">
            <div id="roundBox">
                <p class="progressBarText1">Round</p>
                <p class="progressBarText2">2/5</p>
            </div>
            <div id="scoreBox">
                <p class="progressBarText1">Score</p>
                <p class="progressBarText2" id="insertScore">0</p>
            </div>
        </div>
    </div>
    <footer>
        <div class="expandable" id="flag">
            <div class="changeSize" id="changeSize">
                <button class="upButton" onclick="upsize()">
                    <img class="up" id="arrow" src="assets/newArrowUp.png">
                </button>
                <button class="downButton" onclick="downsize()">
                    <img class="down" id="arrow" src="assets/newArrowDown.png">
                </button>
                <button class="pinButton" onclick="pin()">
                    <img class="pin" id="pin" src="assets/pin.png">
                </button>
            </div>
            <div class="googleMapDefault" id="googleMap"></div>
            <div class="slidecontainer" id="slidecontainer">
                <p id="demo"></p>
                <input type="range" min="1900" max="2024" value="1962" class="slider" id="myRange">
                <a id="guessButton">
                    <div class="makeGuess" id="makeGuess">
                        <p id="guessText" class="guessText">Place your pin on the map</p>
                    </div>
                </a>
            </div>
        </div>
    </footer>

    <div id="adContainer">
        <div id="topPadding">
            <span id="adBarText">Advertisement</span>
        </div>
    </div>

    <script data-cfasync="false" async src="//cdn.intergient.com/1025360/75166/ramp.js"></script>
	
    <script src="js/main5.js"></script>
    <script type="module">

        (async () => {
            const tokenID = "eyJraWQiOiJYNzNDNThBOFpTIiwidHlwIjoiSldUIiwiYWxnIjoiRVMyNTYifQ.eyJpc3MiOiI2UEtTQ1Y5NzIyIiwiaWF0IjoxNzIyNzQxMTA2LCJvcmlnaW4iOiJ0aW1lZ3Vlc3NyLmNvbSJ9.ctvYo-hGl3gJZTHexMoC0-iFOU-9tvn08ThKvsBovUsFJ4bGq1kaaiyizABL9qwCdlSDioqAUxhWrz-7sKW4_Q";
        
            if (!window.mapkit || window.mapkit.loadedLibraries.length === 0) {
                // mapkit.core.js or the libraries are not loaded yet.
                // Set up the callback and wait for it to be called.
                await new Promise(resolve => { window.initMapKit = resolve });
        
                // Clean up
                delete window.initMapKit;
            }
        
            mapkit.init({
                authorizationCallback: function(done) {
                    done(tokenID);
                }
            });
            const mapCentre = new mapkit.CoordinateRegion(
                new mapkit.Coordinate(51.48633971492552, 3.691691980292835),
                new mapkit.CoordinateSpan(1000, 1000)
            );
            const map = new mapkit.Map("googleMap", {
                colorScheme: mapkit.Map.ColorSchemes.Light,
                isRotationEnabled: false,
                showsZoomControl: false,
            });
            map.region = mapCentre;
            map._allowWheelToZoom = true;
            map.cameraZoomRange = new mapkit.CameraZoomRange(50, 1000000000000)

            // This will contain the user-set single-tap annotation.
            let clickAnnotation = null;

            // Add or move an annotation when a user single-taps an empty space
            map.addEventListener("single-tap", event => {
                if (clickAnnotation) {
                    map.removeAnnotation(clickAnnotation);
                }
                // Get the clicked coordinate and add an annotation there
                const point = event.pointOnPage;
                const coordinate = map.convertPointOnPageToCoordinate(point);

                clickAnnotation = new mapkit.MarkerAnnotation(coordinate, {
                    color: "#000000"
                });

                map.addAnnotation(clickAnnotation);
                const lt = clickAnnotation._impl._coordinate.latitude
                const lng = clickAnnotation._impl._coordinate.longitude
                const coords = "(" + lt + ", " + lng + ")"

                console.log(coords)

                sessionStorage.setItem("coords", coords)

                if (flag == false) {
                    document.getElementById("guessButton").href = "roundresults";
                    document.getElementById("makeGuess").className = "makeGuessTrue";
                    document.getElementById("guessText").innerHTML = "Make guess";
                    document.getElementById("guessText").className = "guessTextTrue"
                } flag = true

            });
        })();
        
        </script>
        
    <script>

        sessionStorage.setItem('showResultsTwo', true)
        oneTotal = Number(sessionStorage.getItem("oneTotal"))
        finalTotal = oneTotal
        if (finalTotal >= 10000) {
            var txt2 = finalTotal.toString().slice(0, 2) + "," + finalTotal.toString().slice(2);
            document.getElementById("insertScore").innerHTML = txt2
        } else {
            document.getElementById("insertScore").innerHTML = finalTotal
        }

        playJSON = JSON.parse(sessionStorage.getItem('playArray'))
        thisRoundJson = playJSON[2 - 1]
        document.getElementById("variableImage").src = thisRoundJson.URL;
        document.getElementById("miniImage").src = thisRoundJson.URL;

        document.getElementById("variableImage").onload = function() {
            heightToAssign = variableImage.clientHeight + 'px'
            heightToTakeAway = '-' + heightToAssign
            document.getElementById('photoContainer').style.height = heightToAssign
        }
        sessionStorage.setItem("yearStorage", 1962)

    </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"8cc5fed2df24ebdf","serverTiming":{"name":{"cfExtPri":true,"cfL4":true}},"version":"2024.8.0","token":"ff2c5a08c07a4e1b863d4d2d6f33408d"}' crossorigin="anonymous"></script>
</body>
</html>
